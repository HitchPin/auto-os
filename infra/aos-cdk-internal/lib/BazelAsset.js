"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BazelLambdaCode = void 0;
const aws_cdk_lib_1 = require("aws-cdk-lib");
const bzl = require("./util");
class BazelLambdaCode extends aws_cdk_lib_1.aws_lambda.AssetCode {
    constructor(packagePath, target) {
        const b = new bzl.BazelClient();
        const parts = packagePath.split('/');
        const realTarget = target ?? parts[parts.length - 1];
        const p = b.artifactOf(packagePath, realTarget);
        super(p);
    }
}
exports.BazelLambdaCode = BazelLambdaCode;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmF6ZWxBc3NldC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkJhemVsQXNzZXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkNBR3FCO0FBQ3JCLDhCQUE4QjtBQWE5QixNQUFhLGVBQWdCLFNBQVEsd0JBQU0sQ0FBQyxTQUFTO0lBQ2pELFlBQVksV0FBbUIsRUFBRSxNQUFlO1FBQzVDLE1BQU0sQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2hDLE1BQU0sS0FBSyxHQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDcEMsTUFBTSxVQUFVLEdBQUcsTUFBTSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JELE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ2hELEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUNaLENBQUM7Q0FDSjtBQVJELDBDQVFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICBhd3NfczNfYXNzZXRzIGFzIHMzYSxcbiAgICBhd3NfbGFtYmRhIGFzIGxhbWJkYVxufSBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgKiBhcyBiemwgZnJvbSAnLi91dGlsJztcblxuaW50ZXJmYWNlIEJhemVsT3B0aW9ucyB7XG4gICAgY3VzdG9tQmF6ZWxQYXRoPzogc3RyaW5nLFxuICAgIHdvcmtzcGFjZVJvb3Q/OiBzdHJpbmcsXG59XG5pbnRlcmZhY2UgQmF6ZWxBc3NldFByb3BzIHtcbiAgICBwYWNrYWdlOiBzdHJpbmcsXG4gICAgdGFyZ2V0Pzogc3RyaW5nLFxuICAgIGJhemV6PzogQmF6ZWxPcHRpb25zXG59XG4gXG5cbmV4cG9ydCBjbGFzcyBCYXplbExhbWJkYUNvZGUgZXh0ZW5kcyBsYW1iZGEuQXNzZXRDb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihwYWNrYWdlUGF0aDogc3RyaW5nLCB0YXJnZXQ/OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYiA9IG5ldyBiemwuQmF6ZWxDbGllbnQoKTtcbiAgICAgICAgY29uc3QgcGFydHMgPXBhY2thZ2VQYXRoLnNwbGl0KCcvJyk7XG4gICAgICAgIGNvbnN0IHJlYWxUYXJnZXQgPSB0YXJnZXQgPz8gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IHAgPSBiLmFydGlmYWN0T2YocGFja2FnZVBhdGgsIHJlYWxUYXJnZXQpO1xuICAgICAgICBzdXBlcihwKVxuICAgIH1cbn1cbiJdfQ==